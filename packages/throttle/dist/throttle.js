export function throttle(n,t=1e3/120,e={}){let l,o=null,r=null,i=null,u=!1;const{leading:c=!0,trailing:a=!0,onError:f}=e,s=()=>{if(null===r)return;u=!0;const e=d();try{n.apply(i,r)}catch(n){if(!f)throw n;f(n instanceof Error?n:new Error(String(n)))}finally{u=!1}o=d(),r=null,i=null;const l=d()-e;l>t&&console.warn(`Execution time (${l}ms) exceeded throttle limit (${t}ms)`)},d="undefined"!=typeof performance?()=>performance.now():()=>Date.now(),m=function(...n){const e=d();if(null===o){if(c)return r=n,i=this,void s();o=e}const u=o?t-(e-o):0;r=n,i=this,u<0||u>t?(l&&(clearTimeout(l),l=void 0),o=e,s()):!l&&a&&(n=>{l=setTimeout((()=>{l=void 0,a&&s()}),n)})(u)};return m.cancel=()=>{l&&clearTimeout(l),o=null,r=null,i=null,l=void 0,u=!1},m.flush=()=>{(()=>{if(l&&(clearTimeout(l),l=void 0,!u&&a&&r)&&(o?d()-o:1/0)>=t)return s(),!0})()},m}