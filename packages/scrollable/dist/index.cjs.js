/*! For license information please see index.cjs.js.LICENSE.txt */
!function(){"use strict";var t={d:function(i,s){for(var n in s)t.o(s,n)&&!t.o(i,n)&&Object.defineProperty(i,n,{enumerable:!0,get:s[n]})},o:function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},i={};t.r(i),t.d(i,{Scrollable:function(){return e}});const s=class t{constructor(t={}){const{mass:i=1,tension:s=170,friction:n=null,precision:e=.01,initialValue:o=0,velocity:r=0,targetValue:a=0,onStart:h=null,onUpdate:l=null,onEnd:c=null}=t;this.mass=i,this.tension=s,this.friction=null!==n?n:this.calculateCriticalDamping(),this.precision=e,this.value=o,this.velocity=r,this.targetValue=a,this.lastTime=null,this.isAnimating=!1,this.frameCallback=null,this.onStart=h,this.onUpdate=l,this.onEnd=c,this.animate=this.animate.bind(this)}static createWithPreset(i,s={}){const n=t.presets[i];if(!n)throw new Error(`Preset ${i} not found.`);return new t({...n,...s})}applyPreset(i){const s=t.presets[i];s&&(this.mass=s.mass,this.tension=s.tension,this.friction=void 0!==s.friction?s.friction:this.calculateCriticalDamping())}calculateCriticalDamping(){return 2*Math.sqrt(this.mass*this.tension)}calculateSpringForce(t){return-this.tension*t}calculateDampingForce(t){return-this.friction*t}acceleration(t,i){const s=t-this.targetValue;return(this.calculateSpringForce(s)+this.calculateDampingForce(i))/this.mass}update(t){const i=this.acceleration(this.value,this.velocity)*t,s=this.velocity*t,n=this.acceleration(this.value+.5*s,this.velocity+.5*i)*t,e=(this.velocity+.5*i)*t,o=this.acceleration(this.value+.5*e,this.velocity+.5*n)*t,r=(this.velocity+.5*n)*t,a=this.acceleration(this.value+r,this.velocity+o)*t,h=(this.velocity+o)*t;this.velocity+=1/6*(i+2*n+2*o+a),this.value+=1/6*(s+2*e+2*r+h);const l=this.value-this.targetValue;return.5*this.mass*this.velocity**2+.5*this.tension*l**2<this.precision}start(t,i){this.targetValue=t,this.frameCallback=i||null,this.isAnimating||(this.isAnimating=!0,this.lastTime="undefined"!=typeof performance?performance.now():Date.now(),this.onStart&&this.onStart(this.value),this.animate())}animate(){if(!this.isAnimating)return;const t="undefined"!=typeof performance?performance.now():Date.now(),i=(t-this.lastTime)/1e3;this.lastTime=t;const s=this.update(i);this.frameCallback&&this.frameCallback(this.value),this.onUpdate&&this.onUpdate(this.value),s?(this.isAnimating=!1,this.velocity=0,this.value=this.targetValue,this.frameCallback&&this.frameCallback(this.value),this.onEnd&&this.onEnd(this.value)):this.requestAnimationFrame()}requestAnimationFrame(){requestAnimationFrame(this.animate)}setValue(t,i=!1){this.value=t,i&&(this.velocity=0)}stop(){this.isAnimating=!1}};s.presets={gentle:{mass:1,tension:120},wobbly:{mass:1,tension:180},stiff:{mass:1,tension:210},slow:{mass:1,tension:280},molasses:{mass:1,tension:280,friction:120}};let n=s;class e{constructor(t,i={}){this.isDragging=!1,this.isScrollingWithWheel=!1,this.startPos={x:0,y:0},this.lastPos={x:0,y:0},this.currentPos={x:0,y:0},this.targetPos={x:0,y:0},this.velocity={x:0,y:0},this.lastTimestamp=0,this.rafId=null,this.scrollEndTimeoutId=null,this.verticalSpring=null,this.horizontalSpring=null,this.bounds={containerWidth:0,containerHeight:0,contentWidth:0,contentHeight:0,maxX:0,minX:0,maxY:0,minY:0},this.detectedDirection="both",this.container=t,this.content=t.firstElementChild,this.options={direction:"auto",bounce:!0,springOptions:{},speed:1,acceleration:1,velocity:{x:0,y:0},useRAF:!0,smoothingFactor:.15,precision:.1,maskFeatherSize:"2rem",maskOpacity:.3,onScroll:()=>{},onScrollStart:()=>{},onScrollEnd:()=>{},...i},this.onDragStartBound=this.onDragStart.bind(this),this.onDragMoveBound=this.onDragMove.bind(this),this.onDragEndBound=this.onDragEnd.bind(this),this.onWheelBound=this.onWheel.bind(this),this.observer=new ResizeObserver(this.computeBounds.bind(this)),"auto"===this.options.direction?this.detectScrollDirection():this.detectedDirection=this.options.direction,this.init()}init(){this.initializeSprings(),this.attachEventListeners(),this.setupContainer(),this.computeBounds()}detectScrollDirection(){const t=this.bounds.contentWidth>this.bounds.containerWidth,i=this.bounds.contentHeight>this.bounds.containerHeight;this.detectedDirection=t&&i?"both":t?"horizontal":i?"vertical":"both"}initializeSprings(){const t={stiffness:170,damping:26,precision:this.options.precision,...this.options.springOptions};this.canScrollVertically&&(this.verticalSpring=new n(t),this.verticalSpring.onUpdate=this.handleVerticalSpringUpdate.bind(this),this.verticalSpring.onEnd=this.handleSpringEnd.bind(this)),this.canScrollHorizontally&&(this.horizontalSpring=new n(t),this.horizontalSpring.onUpdate=this.handleHorizontalSpringUpdate.bind(this),this.horizontalSpring.onEnd=this.handleSpringEnd.bind(this))}attachEventListeners(){this.container.addEventListener("mousedown",this.onDragStartBound,{passive:!1}),this.container.addEventListener("touchstart",this.onDragStartBound,{passive:!1}),this.container.addEventListener("wheel",this.onWheelBound,{passive:!1}),window.addEventListener("mousemove",this.onDragMoveBound,{capture:!0}),window.addEventListener("touchmove",this.onDragMoveBound,{capture:!0}),window.addEventListener("mouseup",this.onDragEndBound,{capture:!0}),window.addEventListener("touchend",this.onDragEndBound,{capture:!0}),this.observer.observe(this.container),this.observer.observe(this.content)}setupContainer(){this.container.style.touchAction="none",this.container.style.overflow="hidden",this.content.style.willChange="transform"}get canScrollVertically(){return"vertical"===this.detectedDirection||"both"===this.detectedDirection}get canScrollHorizontally(){return"horizontal"===this.detectedDirection||"both"===this.detectedDirection}handleVerticalSpringUpdate(t){this.setScrollPosition(this.currentPos.x,t)}handleHorizontalSpringUpdate(t){this.setScrollPosition(t,this.currentPos.y)}handleSpringEnd(){this.options.onScrollEnd(),this.updateMask()}applyMask(){const t={"--mask-angle":"both"===this.detectedDirection?"0deg":"horizontal"===this.detectedDirection?"90deg":"0deg","--scrollable-feather-start-opacity":"1","--scrollable-feather-end-opacity":"0","--scrollable-feather-size":this.options.maskFeatherSize};Object.entries(t).forEach((([t,i])=>{this.container.style.setProperty(t,i)}));const i="linear-gradient(\n            var(--mask-angle),\n            rgba(0, 0, 0, var(--scrollable-feather-start-opacity)),\n            #000 var(--scrollable-feather-size),\n            #000 calc(100% - var(--scrollable-feather-size)),\n            rgba(0, 0, 0, var(--scrollable-feather-end-opacity))\n        )";this.container.style.webkitMask=i,this.container.style.mask=i,this.container.style.contain="paint"}updateMask(){this.canScrollVertically&&this.updateVerticalMask(),this.canScrollHorizontally&&this.updateHorizontalMask()}updateVerticalMask(){const t=this.currentPos.y<this.bounds.maxY?"0":"1",i=this.currentPos.y>this.bounds.minY?"0":String(this.options.maskOpacity);this.container.style.setProperty("--scrollable-feather-start-opacity",t),this.container.style.setProperty("--scrollable-feather-end-opacity",i)}updateHorizontalMask(){const t=this.currentPos.x<=this.bounds.maxX?"0":"1",i=this.currentPos.x>=this.bounds.minX?"0":String(this.options.maskOpacity);this.container.style.setProperty("--scrollable-feather-start-opacity",t),this.container.style.setProperty("--scrollable-feather-end-opacity",i)}computeBounds(){const t=window.getComputedStyle(this.content),i=window.getComputedStyle(this.container),s=parseFloat(t.marginLeft)||0,n=parseFloat(t.marginRight)||0,e=parseFloat(t.marginTop)||0,o=parseFloat(t.marginBottom)||0,r=parseFloat(t.paddingLeft)||0,a=parseFloat(t.paddingRight)||0,h=parseFloat(t.paddingTop)||0,l=parseFloat(t.paddingBottom)||0,c=parseFloat(i.paddingLeft)||0,d=parseFloat(i.paddingRight)||0,u=parseFloat(i.paddingTop)||0,p=parseFloat(i.paddingBottom)||0;this.bounds={containerWidth:this.container.clientWidth-r-a-c-d,containerHeight:this.container.clientHeight-h-l-u-p,contentWidth:this.content.scrollWidth+s+n+r+a,contentHeight:this.content.scrollHeight+e+o+h+l,maxX:0,minX:0,maxY:0,minY:0},this.bounds.minX=this.bounds.containerWidth-this.bounds.contentWidth,this.bounds.minY=this.bounds.containerHeight-this.bounds.contentHeight,this.bounds.minX=Math.min(0,this.bounds.minX),this.bounds.minY=Math.min(0,this.bounds.minY),"auto"===this.options.direction&&this.detectScrollDirection(),this.currentPos={x:this.clamp(this.currentPos.x,this.bounds.minX,this.bounds.maxX),y:this.clamp(this.currentPos.y,this.bounds.minY,this.bounds.maxY)},this.targetPos={x:this.clamp(this.targetPos.x,this.bounds.minX,this.bounds.maxX),y:this.clamp(this.targetPos.y,this.bounds.minY,this.bounds.maxY)},this.bounceBack(),this.updateMask()}onDragStart(t){t.preventDefault(),this.isDragging=!0,this.isScrollingWithWheel=!1;const i=this.getEventPosition(t);this.startPos={...i},this.lastPos={...i},this.stopAnimations(),this.options.onScrollStart()}onDragMove(t){if(!this.isDragging)return;t.preventDefault();const i=this.getEventPosition(t),s=(i.x-this.lastPos.x)*this.options.speed,n=(i.y-this.lastPos.y)*this.options.speed;this.lastPos={...i};const e=this.canScrollHorizontally?s:0,o=this.canScrollVertically?n:0;this.scroll(e,o)}onDragEnd(t){if(!this.isDragging)return;this.isDragging=!1;const i=this.getEventPosition(t),s=(i.x-this.lastPos.x)*this.options.speed,n=(i.y-this.lastPos.y)*this.options.speed;this.velocity={x:s*this.options.acceleration,y:n*this.options.acceleration},this.options.bounce&&this.bounceBack(),this.options.onScrollEnd()}onWheel(t){t.preventDefault(),this.isScrollingWithWheel||(this.isScrollingWithWheel=!0,this.options.onScrollStart());let i=0,s=0;t.shiftKey&&this.canScrollHorizontally?i=t.deltaY:(i=t.deltaX,s=t.deltaY),this.canScrollHorizontally||(i=0),this.canScrollVertically||(s=0),i*=this.options.speed,s*=this.options.speed,this.targetPos={x:this.clamp(this.currentPos.x-i,this.bounds.minX,this.bounds.maxX),y:this.clamp(this.currentPos.y-s,this.bounds.minY,this.bounds.maxY)},this.velocity={x:i*this.options.acceleration,y:s*this.options.acceleration},this.updateTransform(),this.debounceScrollEnd()}scroll(t,i){let s=this.currentPos.x,n=this.currentPos.y;this.canScrollHorizontally&&(s+=t),this.canScrollVertically&&(n+=i);const e=.5;if(s>this.bounds.maxX){const t=s-this.bounds.maxX;s=this.bounds.maxX+t*e}else if(s<this.bounds.minX){const t=this.bounds.minX-s;s=this.bounds.minX-t*e}if(n>this.bounds.maxY){const t=n-this.bounds.maxY;n=this.bounds.maxY+t*e}else if(n<this.bounds.minY){const t=this.bounds.minY-n;n=this.bounds.minY-t*e}this.setScrollPosition(s,n)}updateTransform(){this.options.useRAF?(null!==this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame((t=>{this.lastTimestamp||(this.lastTimestamp=t);const i=t-this.lastTimestamp;this.lastTimestamp=t,this.isDragging||(this.currentPos.x+=(this.targetPos.x-this.currentPos.x)*Math.min(1,this.options.smoothingFactor*i),this.currentPos.y+=(this.targetPos.y-this.currentPos.y)*Math.min(1,this.options.smoothingFactor*i)),this.applyTransform(),!this.isDragging&&(Math.abs(this.targetPos.x-this.currentPos.x)>this.options.precision||Math.abs(this.targetPos.y-this.currentPos.y)>this.options.precision)?this.rafId=requestAnimationFrame(this.updateTransform.bind(this)):this.rafId=null}))):this.applyTransform()}applyTransform(){this.content.style.transform=`translate3d(${this.currentPos.x}px, ${this.currentPos.y}px, 0)`,this.updateMask(),this.options.onScroll(this.currentPos)}bounceBack(){this.checkBounceNeeded()&&(this.canScrollHorizontally&&this.applyHorizontalBounce(),this.canScrollVertically&&this.applyVerticalBounce())}checkBounceNeeded(){const t=this.currentPos.x>this.bounds.maxX||this.currentPos.x<this.bounds.minX,i=this.currentPos.y>this.bounds.maxY||this.currentPos.y<this.bounds.minY;return t||i}applyHorizontalBounce(){if(!this.horizontalSpring)return;const t=this.clamp(this.currentPos.x,this.bounds.minX,this.bounds.maxX);Math.abs(t-this.currentPos.x)>this.options.precision&&(this.horizontalSpring.stop(),this.horizontalSpring.setValue(this.currentPos.x),this.horizontalSpring.start(t))}applyVerticalBounce(){if(!this.verticalSpring)return;const t=this.clamp(this.currentPos.y,this.bounds.minY,this.bounds.maxY);Math.abs(t-this.currentPos.y)>this.options.precision&&(this.verticalSpring.stop(),this.horizontalSpring.setValue(this.currentPos.y),this.verticalSpring.start(t))}getEventPosition(t){return t instanceof MouseEvent?{x:t.clientX,y:t.clientY}:t.touches.length>0?{x:t.touches[0].clientX,y:t.touches[0].clientY}:{x:0,y:0}}setScrollPosition(t,i){const s=this.canScrollHorizontally?t:this.currentPos.x,n=this.canScrollVertically?i:this.currentPos.y;this.currentPos={x:s,y:n},this.targetPos={x:s,y:n},this.updateTransform()}stopAnimations(){null!==this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=null),this.verticalSpring?.stop(),this.horizontalSpring?.stop()}debounceScrollEnd(){null!==this.scrollEndTimeoutId&&clearTimeout(this.scrollEndTimeoutId),this.scrollEndTimeoutId=window.setTimeout((()=>{this.isScrollingWithWheel=!1,this.options.bounce&&this.bounceBack(),this.options.onScrollEnd(),this.scrollEndTimeoutId=null}),100)}clamp(t,i,s){return Math.max(i,Math.min(s,t))}updateScrollDirection(t){this.options.direction=t,"auto"===t?this.detectScrollDirection():this.detectedDirection=t,this.computeBounds()}scrollTo(t,i,s=!0){this.stopAnimations(),this.options.onScrollStart();const n=this.clamp(t,this.bounds.minX,this.bounds.maxX),e=this.clamp(i,this.bounds.minY,this.bounds.maxY);if(!s)return this.setScrollPosition(n,e),void this.options.onScrollEnd();this.targetPos={x:n,y:e},this.updateTransform()}scrollBy(t,i,s=!0){this.scrollTo(this.currentPos.x+t,this.currentPos.y+i,s)}getScrollPosition(){return{...this.currentPos}}getBounds(){return{...this.bounds}}isScrolling(){return this.isDragging||this.isScrollingWithWheel||null!==this.rafId}recalculateBounds(){this.computeBounds()}destroy(){this.container.removeEventListener("mousedown",this.onDragStartBound),this.container.removeEventListener("touchstart",this.onDragStartBound),this.container.removeEventListener("wheel",this.onWheelBound),window.removeEventListener("mousemove",this.onDragMoveBound),window.removeEventListener("touchmove",this.onDragMoveBound),window.removeEventListener("mouseup",this.onDragEndBound),window.removeEventListener("touchend",this.onDragEndBound),this.stopAnimations(),null!==this.scrollEndTimeoutId&&clearTimeout(this.scrollEndTimeoutId),this.observer.disconnect(),this.container.style.touchAction="",this.container.style.overflow="",this.container.style.webkitMask="",this.container.style.mask="",this.container.style.contain="",this.content.style.transform="",this.content.style.willChange="";["--mask-angle","--scrollable-feather-start-opacity","--scrollable-feather-end-opacity","--scrollable-feather-size"].forEach((t=>{this.container.style.removeProperty(t)}))}}module.exports=i}();